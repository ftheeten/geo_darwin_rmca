{# src/AppBundle/Resources/views/dloccenter/detail_point_to_stratum.html.twig #}
{% import "@App/forms/read_test.html.twig" as read_test  %}
{% set read_mode=read_mode|default("read") %}
{% set default_val = default_val|default(null) %}
{% set search_form = search_form|default(null) %}
{% include "@App/forms/standalonejs.html.twig" %}


<div class="row">			
		<div class="col-sm-1">{{ index }} PK</div>
		
		<div class="col-sm-2">{{ read_test.input_read_mode(read_mode, "text", ctrl_prefix ~"_pk_"~ index, ctrl_prefix ~"_pk["~ index ~ "]",default_val.pk ?? "","readonly_class", "width:100%") }}</div>
		
		
		<input type="hidden" name="{{ ctrl_prefix }}_idcollection[{{index}}]" id="{{ ctrl_prefix }}_idcollection_{{ index }}"  ></input>
		
		<input type="hidden" name="{{ ctrl_prefix }}_idpt[{{index}}]" id="{{ ctrl_prefix }}_idpt_{{ index }}" ></input>
</div>
<div class="row">	
	<div class="col-sm-1">Order stratum</div>
		
	<div class="col-sm-2">
	{{ read_test.input_read_mode(read_mode, "number", ctrl_prefix ~"_orderstratum_"~ index, ctrl_prefix ~"_orderstratum["~ index~"]",default_val.idstratum ?? "","", "width:100%", 1) }}</div>
	<div class="col-sm-1">Alternance</div>
	<div class="col-sm-2">
	{{ read_test.input_read_mode(read_mode, "checkbox", ctrl_prefix ~"_alternance_"~ index, ctrl_prefix ~"_alternance["~ index ~"]", default_val.alternance ?? "") }}
	</div>	
</div>
<div class="row">	
	<div class="col-sm-1">Stratum</div>

	<div class="col-sm-2">{{ read_test.select2_read_mode(read_mode, ctrl_prefix ~"_lithostratum_" ~ index, ctrl_prefix ~"_lithostratum[" ~ index ~"]", path('app_lithostratum_autocomplete'),"lithostratum", default_val.lithostratum??"","select2","width:100%"  ) }}</div>
	
	<div class="col-sm-1">Top stratum</div>
	<div class="col-sm-2">{{ read_test.input_read_mode(read_mode, "number", ctrl_prefix ~"_topstratum_"~ index, ctrl_prefix ~"_topstratum["~ index ~"]",default_val.topstratum ?? "","", "width:100%", 0.01) }}</div>
	
	<div class="col-sm-1">Bottom stratum</div>
	<div class="col-sm-2">{{ read_test.input_read_mode(read_mode, "number", ctrl_prefix ~"_bottomstratum_"~ index, ctrl_prefix ~"_bottomstratum["~ index ~"]",default_val.bottomstratum ?? "","", "width:100%", 0.01) }}</div>
</div>
<div class="row">
	<div class="col-sm-12">Description :</div>
</div>
<div class="row">
	<div class="col-sm-12">
	{% include "@App/foreignkeys/template_subforms_noajax.html.twig" with {'nested_template':"@App/dloccenter/detail_point_to_stratum_description.html.twig" , 'ctrl_prefix' : 'point_to_stratum_description_' ~ index , 'ajax_route': path('get_widget_point_to_stratum_description', {'table':"dloccenter"}), 'fk_values': default_val.dlocstratumdesc|default(null),
'delete_route':'app_delete_stratum_description',
'fk_key_field':'pk'
 }  %}
	</div>
</div>

<script type="text/javascript">
$(document).ready(
	function()
	{
		//ateention dangereux pour l'insertiond eorderstratum
		$('.readonly_class').attr('readonly', true);		
		{% if not default_val is null %}
			{% if read_mode !="read "%}
				{% if default_val.alternance %}
					$("#{{ ctrl_prefix }}_alternance_{{ index }}").prop("checked",true);
				{% endif %}
			{% endif %}
		{% endif %}
	});
</script>